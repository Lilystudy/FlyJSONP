var FlyJSONP=(function(b){var i,f,c,a,d,g,h,e;f=function(j,l,k){if(j.addEventListener){j.addEventListener(l,k,false)}else{if(j.attachEvent){j.attachEvent("on"+l,k)}else{j["on"+l]=k}}};c=function(l,j){i.log("Garbage collecting!");j.parentNode.removeChild(j);b[l]=undefined;try{delete b[l]}catch(k){}};a=function(k,l){var m="",j,n;for(j in k){if(k.hasOwnProperty(j)){j=l?encodeURIComponent(j):j;n=l?encodeURIComponent(k[j]):k[j];m+=j+"="+n+"&"}}return m.replace(/&$/,"")};d=function(){var m="",l=[],j="0123456789ABCDEF",k=0;for(k=0;k<32;k+=1){l[k]=j.substr(Math.floor(Math.random()*16),1)}l[12]="4";l[16]=j.substr((l[16]&3)|8,1);m="flyjsonp_"+l.join("");return m};g=function(k,j){i.log(j);if(typeof(k)!=="undefined"){k(j)}};h=function(k,j){i.log("GET Success");i.log(j);if(typeof(k)!=="undefined"){k(j)}};e=function(k,j){i.log("POST Success");i.log(j);if(typeof(k)!=="undefined"){j=j.query.results.postresult;if(j.json){j=j.json}k(j)}};i={};i.options={debug:false};i.init=function(j){var k;i.log("Initializing!");for(k in j){if(j.hasOwnProperty(k)){i.options[k]=j[k]}}i.log("Initialization options");i.log(i.options)};i.log=function(j){if(b.console&&i.options.debug){b.console.log(j)}};i.get=function(l){l=l||{};var k=l.url,n=l.callbackParameter||"callback",m=l.parameters||{},j=b.document.createElement("script"),p=d(),o="?";if(!k){throw new Error("URL must be specified!")}m[n]=p;if(k.indexOf("?")>=0){o="&"}k+=o+a(m,true);b[p]=function(q){if(typeof(q)==="undefined"){g(l.error,"Invalid JSON data")}else{if(l.httpMethod==="post"){e(l.success,q)}else{h(l.success,q)}}c(p,j)};i.log("Getting JSONP data");j.setAttribute("src",k);b.document.getElementsByTagName("head")[0].appendChild(j);f(j,"error",function(){c(p,j);g(l.error,"Error while trying to access the URL")})};i.post=function(k){k=k||{};var j=k.url,o=k.parameters||{},n,m,l={};if(!j){throw new Error("URL must be specified!")}n=encodeURIComponent('select * from jsonpost where url="'+j+'" and postdata="'+a(o,false)+'"');m="http://query.yahooapis.com/v1/public/yql?q="+n+"&format=json&env="+encodeURIComponent("store://datatables.org/alltableswithkeys");l.url=m;l.httpMethod="post";if(typeof(k.success)!=="undefined"){l.success=k.success}if(typeof(k.error)!=="undefined"){l.error=k.error}i.get(l)};return i}(this));